#version 300 es

precision highp float;
precision highp sampler2D;

in vec2 uv;
out vec4 out_color;

uniform vec2 u_resolution;
uniform float u_time;
uniform vec4 u_mouse;
uniform sampler2D u_textures[16];

#include <lygia/animation/easing/quadratic>
#include <lygia/animation/easing/exponential>


void main(void) {
    float progress = quadraticOut(min((u_time/2.), 1.0));

    vec2 pixel = 1.0/u_resolution.xy;
    vec2 st = gl_FragCoord.xy * pixel;

    st.y = 1. - st.y;

    float t = smoothstep(progress, progress+.2, (st.x+st.y)/2.0);    

    float ea = exponentialOut(progress);
    vec2 uv1 = uv - ((1. - ea) * .3);
    vec2 uv2 = uv - (ea * 0.9);

    out_color = mix(
        texture(u_textures[0],vec2(uv.x, uv1.y + t)),
        texture(u_textures[1],vec2(uv.x, uv2.y + (1. - t))),
        t
    );
}
